<form [formGroup]="searchFormGroup">
  <mat-form-field>
    <mat-label>Search tasks...</mat-label>
    <input matInput formControlName="title" />
  </mat-form-field>
</form>

<div class="tasks-list">
  @if (isLoading()) {
    <div class="mat-spinner-container">
      <mat-spinner></mat-spinner>
    </div>
  } @else {
    @for (task of activeTasks(); track $index) {
      <tm-task-card [task]="task" [actions]="actions()" (onAction)="onAction($event, task)">
        @if (editingTaskId() !== task._id) {
          {{ task.description || 'â€”' }}
        } @else {
          <form [formGroup]="editFormGroup">
            <mat-form-field appearance="outline">
              <mat-label>Task description</mat-label>
              <textarea matInput formControlName="description"></textarea>
              @if (editFormGroup.get('description')?.hasError('required')) {
                <mat-error>Task description is required</mat-error>
              }
            </mat-form-field>
          </form>
        }
      </tm-task-card>
    }
  }
</div>
